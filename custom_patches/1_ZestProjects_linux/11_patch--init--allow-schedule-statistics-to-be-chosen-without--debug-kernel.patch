From 4178ca0fa6c4d8f6389f7ac8a2079faf88ad65c0 Mon Sep 17 00:00:00 2001
From: Sinan Kaya <sinan.kaya@microsoft.com>
Date: Wed, 6 Mar 2019 21:12:06 +0000
Subject: [PATCH] init: allow schedule statistics to be chosen without
 DEBUG_KERNEL

TAG_MSFT: lcow

Signed-off-by: Sinan Kaya <sinan.kaya@microsoft.com>
Signed-off-by: Pavel Tatashin <pasha.tatashin@soleen.com>
Link: https://github.com/microsoft/WSL2-Linux-Kernel/commit/af3c5779119b880ce2bb7df5e56c7d0d518cb690
Signed-off-by: Nathan Chancellor <natechancellor@gmail.com>
Signed-off-by: Diab Neiroukh <lazerl0rd@thezest.dev>
---
 lib/Kconfig.debug | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/lib/Kconfig.debug b/lib/Kconfig.debug
index 7cf3664b2cea..d0bda7e9fb01 100644
--- a/lib/Kconfig.debug
+++ b/lib/Kconfig.debug
@@ -717,7 +717,6 @@ config DEBUG_STACK_USAGE
 
 config SCHED_STACK_END_CHECK
 	bool "Detect stack corruption on calls to schedule()"
-	depends on DEBUG_KERNEL
 	default n
 	help
 	  This option checks for a stack overrun on calls to schedule().
@@ -1093,8 +1092,8 @@ menu "Scheduler Debugging"
 
 config SCHED_DEBUG
 	bool "Collect scheduler debugging info"
-	depends on DEBUG_KERNEL && PROC_FS
-	default y
+	depends on PROC_FS
+	default n
 	help
 	  If you say Y here, the /proc/sched_debug file will be provided
 	  that can help debug the scheduler. The runtime overhead of this
@@ -1106,7 +1105,7 @@ config SCHED_INFO
 
 config SCHEDSTATS
 	bool "Collect scheduler statistics"
-	depends on DEBUG_KERNEL && PROC_FS
+	depends on PROC_FS
 	select SCHED_INFO
 	help
 	  If you say Y here, additional code will be inserted into the
